<%--
   Copyright 2015 the original author or phly.
        未经正式书面同意，其他任何个人、团体不得使用、复制、修改或发布本软件.
 --%>
<%--
   
   @author Administrator
   @since  2015年5月18日 下午8:48:46
--%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>首页</title>
	<jsp:include page="/page/ttw/portal/common.jsp"></jsp:include>
    <link href="${ctx}/page/ttw/portal/css/index.css" rel="stylesheet" type="text/css" />
    <script src="${ctx}/page/ttw/portal/js/unslider.min.js" type="text/javascript"></script>
    <script src="${ctx}/page/ttw/portal/build/template.js"></script>
</head>
<body>
	<%-- 头部    orc_lh  start --%>
	<jsp:include page="/page/ttw/portal/tpl/header.jsp"></jsp:include>
	<%-- 头部    orc_lh  start --%>
	
    <div class="main">
        <script>
            document.querySelectorAll('.main')[0].innerHTML += template('banner', {});
        </script>
        
        <!-- 热门分类 -->        
        <div class="hot">
            <div class="hot-content container wid1000">
            </div>
        </div>
        <!-- 热门分类 -->
        
        
        <div class="column">
            <div class="column-content container wid1000">
            	
            	<!-- 平面设计 -->
                <div class="module1">
                    <div class="m-tittle">
                        <div class="t-tit fl">
                            <div class="t-fk">
                                1</div>
                            <div class="t-word">
                                平面设计</div>
                        </div>
                        <div class="more fr" id="pmsj_more_id">
                            + MOER</div>
                    </div>
                    <div class="m1-content">
                        <div class="contentleft fl">
                            <div>
                                <img src="images/Index/design_big.png" />
                            </div>
                            <div class="imgsup goodsCategoryNav">
                                <ul class="isul">
                                    <li><a href="#">海报设计</a></li>
                                    <li><a href="#">展架设计</a></li>
                                    <li><a href="#">易拉宝设计</a></li>
                                </ul>
                                <ul class="isul">
                                    <li><a href="#">包装设计</a></li>
                                    <li><a href="#">画册设计</a></li>
                                    <li><a href="#">DM单设计</a></li>
                                </ul>
                                <ul class="isul">
                                    <li><a href="#">卡片设计</a></li>
                                    <li><a href="#">日历设计</a></li>
                                    <li><a href="#">VI设计</a></li>
                                </ul>
                                <ul>
                                    <li><a href="#">UI设计</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="contentright fr">
                            <ul>
                            
                            	<!-- 推荐1 -->
                                <li class="zp-one" id="pm_id_1">
                                    <div class="zp-content">
                                        <img class="mar20" src="images/Index/product.png" style="width: 90px;height: 120px;"/>
                                    </div>
                                    <div class="zp-content zc-red">
                                        <span>¥</span> <span id="pm_pic_1"></span></div>
                                    <div class="zp-content" id="pm_content_1">
                                        深通名片设计</div>
                                </li>
                                
                                <!-- 轮播 -->
                                <li class="m3c-img"  id="pm_img_id_1">
                                	<img src="images/Index/product_ban.png" style="width: 397px; height: 178.5px;"/>
                                    <ul class="m3c-dot">
                                        <!-- <li class="active"><img src="images/Index/product_ban.png" style="display: none;"/></li>
                                        <li><img src="images/Index/design_ban.png" style="display: none;"/></li>
                                        <li><img src="images/Index/product.png" style="display: none;"/></li> -->
                                    </ul>
                                </li>
                                <!-- 轮播 -->
                                
                                
                            	<!-- 推荐2 -->
                                <li class="zp-two" id="pm_id_2">
                                    <div class="zp-content zc-red mar20">
                                        <span>¥</span> <span id="pm_pic_2"></span></div>
                                    <div class="zp-content" id="pm_content_2">
                                        深通名片设计</div>
                                    <div class="zp-content mar20">
                                        <img class="img80" src="images/Index/product.png" style="width: 90px;height: 120px;"/>
                                    </div>
                                </li>
                                
                            </ul>
                            
                            
                            <ul>
                            
                            	<!-- 推荐3 -->
                                <li class="zp-three" id="pm_id_3">
                                    <div class="zp-content">
                                        <img class="mar20 img80" src="images/Index/product.png" style="width: 90px;height: 120px;"/>
                                    </div>
                                    <div class="zp-content zc-red">
                                        <span>¥</span> <span id="pm_pic_3"></span></div>
                                    <div class="zp-content" id="pm_content_3">
                                        深通名片设计</div>
                                </li>
                                
                            	<!-- 推荐4 -->
                                <li class="zp-four" id="pm_id_4">
                                    <div class="zp-content">
                                        <img class="mar20 img80" src="images/Index/product.png" style="width: 90px;height: 120px;"/>
                                    </div>
                                    <div class="zp-content zc-red">
                                        <span>¥</span> <span id="pm_pic_4"></span></div>
                                    <div class="zp-content" id="pm_content_4">
                                        深通名片设计</div>
                                </li>
                                
                            	<!-- 推荐5 -->
                                <li class="zp-four" id="pm_id_5">
                                    <div class="zp-content">
                                        <img class="mar20 img80" src="images/Index/product.png" style="width: 90px;height: 120px;"/>
                                    </div>
                                    <div class="zp-content zc-red">
                                        <span>¥</span> <span id="pm_pic_5"></span></div>
                                    <div class="zp-content" id="pm_content_5">
                                        深通名片设计</div>
                                </li>
                                
                            	<!-- 推荐6 -->
                                <li class="zp-auto" id="pm_id_6">
                                    <div class="zp-content">
                                        <img class="mar20 img80" src="images/Index/product.png" style="width: 90px;height: 120px;"/>
                                    </div>
                                    <div class="zp-content zc-red">
                                        <span>¥</span> <span id="pm_pic_6"></span></div>
                                    <div class="zp-content" id="pm_content_6">
                                        深通名片设计</div>
                                </li>
                                
                            </ul>
                        </div>
                    </div>
                    <div class="adv">
                    </div>
                </div>
                <!-- 平面设计 -->
                
                <div class="module1 mar38">
                    <div class="m-tittle">
                        <div class="t-tit fl">
                            <div class="t-fk">
                                2</div>
                            <div class="t-word">
                                建站营销</div>
                        </div>
                        <div class="more fr" id="jzyx_more_id">
                            + MOER</div>
                    </div>
                    <div class="m1-content">
                        <div class="contentleft fl">
                            <div>
                                <img src="images/Index/station_big.png" />
                            </div>
                            <div class="imgsuptwo goodsCategoryNav"> 
                                <ul class="isul">
                                    <li><a href="#">交易类</a></li>
                                    <li><a href="#">标准类</a></li>
                                    <li><a href="#">电商类</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="contentright fr">
                            <ul>
                                <li class="m3c-img" id="jzyx_img_id_1">
                                	<img src="images/Index/product_ban.png" style="width: 397px; height: 178.5px;"/>
                                    <ul class="m3c-dot">
                                        <!-- <li class="active"><img src="images/Index/product_ban.png" style="display: none;"/></li>
                                        <li><img src="images/Index/design_ban.png" style="display: none;"/></li>
                                        <li><img src="images/Index/product.png" style="display: none;"/></li> -->
                                    </ul>
                                </li>
                                
                                <li class="zp-five" id="jz_id_1">
                                    <div class="zp-content zc-red mar20">
                                        <span>¥</span> <span id="jz_pic_1"></span></div>
                                    <div class="zp-content" id="jz_content_1">
                                        深通名片设计</div>
                                    <div class="zp-content  ">
                                        <img src="images/Index/product.png" style="width: 120px;height: 120px"/>
                                    </div>
                                </li>
                                
                                <li class="zp-two" id="jz_id_2">
                                    <div class="zp-content zc-red mar20">
                                        <span>¥</span> <span id="jz_pic_2"></span></div>
                                    <div class="zp-content" id="jz_content_2">
                                        深通名片设计</div>
                                    <div class="zp-content mar20">
                                        <img class="img80" src="images/Index/product.png" />
                                    </div>
                                </li>
                            </ul>
                            <ul>
                                <li class="zp-three" id="jz_id_3">
                                    <div class="zp-content">
                                        <img class="mar20 img80" src="images/Index/product.png" />
                                    </div>
                                    <div class="zp-content zc-red">
                                        <span>¥</span> <span id="jz_pic_3"></span></div>
                                    <div class="zp-content" id="jz_content_3">
                                        深通名片设计</div>
                                </li>
                                
                                <li class="zp-four" id="jz_id_4">
                                    <div class="zp-content">
                                        <img class="mar20 img80" src="images/Index/product.png" />
                                    </div>
                                    <div class="zp-content zc-red">
                                        <span>¥</span> <span id="jz_pic_4"></span></div>
                                    <div class="zp-content" id="jz_content_4">
                                        深通名片设计</div>
                                </li>
                                
                                <li class="zp-four" id="jz_id_5">
                                    <div class="zp-content">
                                        <img class="mar20 img80" src="images/Index/product.png" />
                                    </div>
                                    <div class="zp-content zc-red">
                                        <span>¥</span> <span id="jz_pic_5"></span></div>
                                    <div class="zp-content" id="jz_content_5">
                                        深通名片设计</div>
                                </li>
                                
                                <li class="zp-auto" id="jz_id_6">
                                    <div class="zp-content">
                                        <img class="mar20 img80" src="images/Index/product.png" />
                                    </div>
                                    <div class="zp-content zc-red">
                                        <span>¥</span> <span id="jz_pic_6"></span></div>
                                    <div class="zp-content" id="jz_content_6">
                                        深通名片设计</div>
                                </li>
                                
                            </ul>
                        </div>
                    </div>
                    <div class="adv">
                    </div>
                </div>
                <div class="module1 mar38">
                    <div class="m-tittle">
                        <div class="t-tit fl">
                            <div class="t-fk">
                                3</div>
                            <div class="t-word">
                                项目案例</div>
                        </div>
                        <div class="more fr" id="xmal_more_id">
                            + MOER</div>
                    </div>
                    <div class="m1-content">
                        <div class="contentleft fl">
                            <div>
                                <img src="images/Index/case_big.png" />
                            </div>
                            <div class="imgsupthree goodsCategoryNav">
                                <ul class="isul">
                                    <li><a href="#">定制网站</a></li>
                                    <li><a href="#">网站建设</a></li>
                                    <li><a href="#">微店建设</a></li>
                                </ul>
                                <ul class="isul">
                                    <li><a href="#">淘宝店建设</a></li>
                                    <li><a href="#">天猫店建设</a></li>
                                    <!-- <li><a href="#">UI设计</a></li> -->
                                </ul>
                            </div>
                        </div>
                        <div class="contentright fr">
                            <ul>
                                <li class="m3c-img" id="xm_img_id_1">
                                	<img src="images/Index/product_ban.png" style="width: 397px; height: 178.5px;"/>
                                    <ul class="m3c-dot">
                                        <!-- <li class="active"><img src="images/Index/product_ban.png" style="display: none;"/></li>
                                        <li><img src="images/Index/design_ban.png" style="display: none;"/></li>
                                        <li><img src="images/Index/product.png" style="display: none;"/></li> -->
                                    </ul>
                                </li>
                                
                                <li class="zp-five" id="xm_id_1">
                                    <div class="zp-content zc-red mar20">
                                        <span>¥</span> <span id="xm_pic_1"></span></div>
                                    <div class="zp-content" id="xm_content_1">
                                        深通名片设计</div>
                                    <div class="zp-content  ">
                                        <img src="images/Index/product.png"  style="width: 120px;height: 120px"/>
                                    </div>
                                </li>
                                <li class="zp-two" id="xm_id_2">
                                    <div class="zp-content zc-red mar20">
                                        <span>¥</span> <span id="xm_pic_2"></span></div>
                                    <div class="zp-content"id="xm_content_2">
                                        深通名片设计</div>
                                    <div class="zp-content mar20">
                                        <img class="img80" src="images/Index/product.png" />
                                    </div>
                                </li>
                            </ul>
                            <ul>
                                <li class="zp-six" id="xm_id_3">
                                    <div class="zp-content zc-red mar20">
                                        <span>¥</span> <span id="xm_pic_3"></span></div>
                                    <div class="zp-content" id="xm_content_3">
                                        深通名片设计</div>
                                    <div class="zp-content  ">
                                        <img src="images/Index/product.png" style="width: 136px;height: 87px;" />
                                    </div>
                                </li>
                                <li class="zp-six" id="xm_id_4">
                                    <div class="zp-content zc-red">
                                        <span>¥</span> <span id="xm_pic_4"></span></div>
                                    <div class="zp-content" id="xm_content_4">
                                        深通名片设计</div>
                                    <div class="zp-content mar20">
                                        <img class="img80" src="images/Index/product.png" />
                                    </div>
                                </li>
                                
                                <li class="m3c-img" id="xm_img_id_2">
                                	<img src="images/Index/product_ban.png" style="width: 397px; height: 178.5px;"/>
                                    <ul class="m3c-dot">
                                        <!-- <li class="active"><img src="images/Index/product_ban.png" style="display: none;"/></li>
                                        <li><img src="images/Index/design_ban.png" style="display: none;"/></li>
                                        <li><img src="images/Index/product.png" style="display: none;"/></li> -->
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="adv">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var html = template('footer', {});
        document.body.innerHTML += html;
    </script>
    <script type="text/javascript">

        $(document).ready(function () {

            $(".dropdownDefault,.dropdownContainer .downArrow1").click(function (event) {
                if ($(this).siblings(".dropdrown-menu").is(":hidden")) {
                    $(".dropdrown-menu").hide();
                    $(this).siblings(".dropdrown-menu").show(10);
                } else {
                    $(this).siblings(".dropdrown-menu").hide(10);
                }


                event.stopPropagation();
                $(document).click(function () {
                    $(".dropdrown-menu").hide();
                });
            });
            $(".dropdrown-menu li").click(function () {
                $(this).parent().siblings(".dropdownDefault").html($(this).html());
                $(this).parent().hide();
            });
        }); 
    </script>
    <script src="${pageContext.request.contextPath}/page/ttw/js/myslider.js" type="text/javascript"></script>
	<script>
		$(function(){
			function initGoodsCategoryScroll(){
				$('.banner').unslider({
		            speed: 500,
		            delay: 3000,
		            complete: function () { },
		            keys: true,
		            dots: true,
		            fluid: false
		        });
		        var unslider = $('.banner').unslider();
		        $('.unslider-arrow').click(function () {
		            var fn = this.className.split(' ')[1];
		            unslider.data('unslider')[fn]();
		        });
			}			
			
			//热门图片滚动
			function _loadScrollImg(){
				$(".m3c-img").each(function(){
					var _this = $(this); 
					var picObj = _this.find("img").css("cursor","pointer").get(0);
					var smallImgArr = _this.find(".m3c-dot").find("img");
					$.mySlider({bigImg:picObj, smallImg:smallImgArr, timeVal: 3000, style:'simple'});
				}); 
			}
			
			//产品分类推荐
			function _loadGoodsCategory(data){
				
				//产品推荐分类
				var html = "";
				$(data.recommend).each(function(idx,data){
					html += '<div class="h-moddle"  onclick="$.toGoodsCategoryDetail(\''+data.id+'\')" >'+
	                    '<div class="m-pt bgcol'+(idx+1)+'">'+
	                        '<div class="pt-img'+(idx+1)+'">'+
	                        '</div>'+
	                        '<div class="pt-tit">'+
	                            data.name+
	                        '</div>'+
	                    '</div>'+
	                    '<div class="m-word">'+
	                        '<h1 class="col'+(idx+1)+'">'+
	                            data.price+'元<span>起</span></h1>'+
	                        '<div>'+data.metaDes+'</div>'+
	                    '</div>'+
	                '</div>';
				});
				
				$(".hot-content").html(html);
				
				//产品滚动分类
				html = "";
				$(data.scroll).each(function(idx,data){
					html += '<li><img src="'+webRoot+data.pictureUrl+'" style="width: 100%;height: 100%;cursor:pointer;" onclick="$.toGoodsCategoryDetail(\''+data.id+'\')" /></li>';
				});
				$(".banner").find("ul").html(html);
				initGoodsCategoryScroll();
			}
			
			//平面设计
			function _loadPmsj(data){
				//推荐产品
				$(data.recommend).each(function(idx,data){
					var _pm_id = $("#pm_id_"+(idx+1));
					_pm_id.find("img").attr({"src":webRoot+data.pictureUrl,"goodsId":data.id}).css("cursor","pointer").click(function(){toGoodsDetail($(this).attr("goodsId"));});
					_pm_id.find("#pm_pic_"+(idx+1)).html(data.price);
					_pm_id.find("#pm_content_"+(idx+1)).html(data.goodsName);
				});
				
				//热门产品
				var html = "";
				$(data.hot).each(function(idx,data){
					html += '<li class="'+((idx==0)?"active":"")+'"><img src="'+webRoot+data.pictureUrl+'" style="display: none;" bid="'+data.id+'"/></li>';
				});
				$("#pm_img_id_1").find(".m3c-dot").html(html);
			}

			//建站营销
			function _loadJzyx(data){
				//推荐产品
				$(data.recommend).each(function(idx,data){
					var _pm_id = $("#jz_id_"+(idx+1));
					_pm_id.find("img").attr({"src":webRoot+data.pictureUrl,"goodsId":data.id}).css("cursor","pointer").click(function(){toGoodsDetail($(this).attr("goodsId"));});
					_pm_id.find("#jz_pic_"+(idx+1)).html(data.price);
					_pm_id.find("#jz_content_"+(idx+1)).html(data.goodsName);
				});
				//热门产品
				var html = "";
				$(data.hot).each(function(idx,data){
					html += '<li class="'+((idx==0)?"active":"")+'"><img src="'+webRoot+data.pictureUrl+'" style="display: none;" bid="'+data.id+'" /></li>';
				});
				$("#jzyx_img_id_1").find(".m3c-dot").html(html);
			}

			//项目案例
			function _loadXmal(data){
				//推荐产品
				$(data.recommend).each(function(idx,data){
					var _pm_id = $("#xm_id_"+(idx+1));
					_pm_id.find("img").attr({"src":webRoot+data.pictureUrl,"goodsId":data.id}).css("cursor","pointer").click(function(){toGoodsDetail($(this).attr("goodsId"));});
					_pm_id.find("#xm_pic_"+(idx+1)).html(data.price);
					_pm_id.find("#xm_content_"+(idx+1)).html(data.goodsName);
				});
				//热门产品
				var html = "";
				$(data.hot).each(function(idx,data){
					html += '<li class="'+((idx==0)?"active":"")+'"><img src="'+webRoot+data.pictureUrl+'" style="display: none;" bid="'+data.id+'" /></li>';
				});
				$("#xm_img_id_1").find(".m3c-dot").html(html);
				$("#xm_img_id_2").find(".m3c-dot").html(html);
			}
			
			
			function loadHomeData(){
				$.ajax({
					   type: "POST",
					   url: webRoot+"/page/portal/queryIndexProduceInfo",
					   success: function(msg){
						   if(msg){
							   //推荐产品分类信息
							   if(msg.goodsCategoryInfo){
								   _loadGoodsCategory(msg.goodsCategoryInfo);
							   }
							   
							   //平面设计推荐产品集合
							   if(msg.pmsjInfo){
								   _loadPmsj(msg.pmsjInfo);
							   }
							   
							   //建站营销推荐产品集合
							   if(msg.jzyxInfo){
								   _loadJzyx(msg.jzyxInfo);
							   }
							   
							   //项目案例推荐产品集合
							   if(msg.xmalInfo){
								   _loadXmal(msg.xmalInfo);
							   }
							   _loadScrollImg();	
						   }
					   }
					});
			};
			
			//到产品明细
			function toGoodsDetail(productId){
				window.location.href = webRoot + "/page/portal/product?productId="+productId;
			}
			
			//到产品类别明细
			function toGoodsCategoryDetail(goodsCategoryId){
				window.location.href = webRoot + "/page/portal/productCategory?goodsCategoryId="+goodsCategoryId;
			}

			//绑定事件
			function bindEvent(){
				//平面设计查询更多
				$("#pmsj_more_id").css("cursor","pointer").click(function(){
					toGoodsCategoryDetail("C16A8392492D11E5B93902004C4F4F50");
				});
				
				//建站营销查询更多
				$("#jzyx_more_id").css("cursor","pointer").click(function(){
					toGoodsCategoryDetail("25995D783F7911E5B93902004C4F4F50");				
				});
				
				//项目案例查询更多
				$("#xmal_more_id").css("cursor","pointer").click(function(){
					toGoodsCategoryDetail("BF111F684AFE11E59E3802004C4F4F50");					
				});
				
				//商品分类导航
				$(".goodsCategoryNav").find("li a").each(function(){
					$(this).attr({"href":"javascript:void(0);","onclick":"$.toGoodsCategoryDetail('"+(nav[this.innerHTML.trim()])+"')"});
				});
				
				//热门图片点击查看
				$(".m3c-img").each(function(){
					var _this = $(this); 
					var _picObj = _this.find("img")[0];
					_this.click(function(){
						if(_picObj.getAttribute("bid")){
							toGoodsDetail(_picObj.getAttribute("bid"));
						}
					});
					
				}); 
				
			}
			loadHomeData();
			bindEvent();
			
			$.toGoodsCategoryDetail = toGoodsCategoryDetail;
			$.toGoodsDetail = toGoodsDetail;
		});
	</script>
</body>
</html>
